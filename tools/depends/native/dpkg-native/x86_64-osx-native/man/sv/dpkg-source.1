.\" Authors: Ian Jackson, Raphael Hertzog
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH dpkg\-source 1 2008\-03\-16 Debianprojektet dpkg\-verktygen
.SH NAMN
dpkg\-source \- Verktyg för att manipulera Debiankällkodspaket (.dsc)
.
.SH SYNOPS
\fBdpkg\-source\fP [\fIflaggor\fP] \fIåtgärd\fP
.
.SH BESKRIVNING
\fBdpkg\-source\fP packar och packar upp Debiankällkodsarkiv.

Inga av dessa kommandon tillåter att flera flaggor kombineras till ett, och
de tillåter inte att värdet på en flagga anges som ett separat argument.
.
.SH KOMMANDON
.TP 
\fB\-x \fP\fIfilnamn\fP\fB.dsc \fP[\fIutdatakatalog\fP]
Extrahera ett källkodspaket. Ett argument som inte är en flagga måste anges,
namnet på debiankällkodsstyrfilen (\fB.dsc\fP). Ett valfritt andra argument som
inte är en flagga kan anges för att bestämma vilken katalog källkoden skall
packas upp i, det får inte existera. Om du inte anger någon utdatakatalog
extraheras källkodspaketet till en katalog som heter \fIkällkod\fP\-\fIversion\fP i
den aktuella arbetskatalogen.

\fBdpkg\-source\fP läser namnen på de övriga filer som ingår i källkodspaketet
från styrfilen; de antas vara i samma katalog som \fB.dsc\fP\-filen.

Filerna i det extraherade paketet kommer att ha behörighet och ägare satta
till det som kunde förväntas om filerna och katalogerna bara hade skapats \-
kataloger och körbara filer kommer ha 0777 och enkla filer 0666, båda
modifierade av uppackarens umask; om föräldrakatalogen är setgid kommer de
extraherade katalogerna också att vara det, och samtliga filer och kataloger
kommer ärva dess gruppägarskap.

Om källkoden använder ett annat format än standardformatet (gäller för
närvarande alla format förutom "1.0"), kommer dess namn att lagras som
\fBdebian/source/format\fP så att det används som standard när källkodspaketet
byggs på nytt.

.TP 
\fB\-b\fP \fIkatalog\fP [\fIformatspecifika\-flaggor\fP]
Bygg ett källkodpaket. Det första argumentet som inte är en flagga tas som
namn på katalogen som innehåller det debianiserade källkodsträdet (dvs. med
underkatalogen "debian" och kanske ändringar på originalfilerna). Beroende
på vilket källkodspaketformat som används för att bygga formatet kan
ytterligare parametrar kanske godtas.

\fBdpkg\-source\fP kommer bygga källkodspaketet med det första format som
fungerar från en lista i denna ordning: formatet som anges i
\fIFormat\fP\-fältet i \fBdebian/control\fP, formatet som anges med
kommandoradsflaggan/\-orna \fI\-\-format\fP, formatet som anges i
\fIdebian/source/format\fP, "1.0", "3.0 (eget)". Se nedan för en omfattande
beskrivning av de olika källkodspaketformaten.

.TP 
\fB\-h\fP, \fB\-\-help\fP
Visar hjälpskärm och avslutar.
.TP 
\fB\-\-version\fP
Visar version och avslutar.
.
.SH "ALLMÄNNA BYGGFLAGGOR"
.TP 
\fB\-c\fP\fIcontrol\-fil\fP
Anger huvudkällkodsstyrfil som information skall läsas från. Standardvärde
är \fBdebian/control\fP. Om ett relativt sökvägsnamn anges tolkas det från
källkodsträdets toppnivåkatalog.
.TP 
\fB\-l\fP\fIändringsloggfil\fP
Anger ändringsloggsfil som information skall läsas från. Standardvärde är
\fBdebian/changelog\fP. Om ett relativt sökvägsnamn anges tolkas det från
källkodsträdets toppnivåkatalog.
.TP 
\fB\-F\fP\fIändringsloggformat\fP
Anger format på ändringsloggen. Som standard läses formatet från en speciell
rad nära slutet av ändringsloggen, eller så används Debians standardformat
om ingen information hittas.
.TP 
\fB\-\-format=\fP\fIvärde\fP
Försök det första givna formatet för att bygga källkodspaketet. Om det
används flera gånger kommer de att försöka användas i den ordning de
angavs. Det överstyr inte ett explicit \fIFormat\fP\-fält i \fBdebian/control\fP,
men det kommer att överstyra ett eventuellt format som anges i
\fBdebian/source/format\fP.
.TP 
\fB\-V\fP\fInamn\fP\fB=\fP\fIvärde\fP
\fBRekommenderas ej\fP. Ställer in en utdatasubstitueringsvariabel. Se
\fBdeb\-substvars\fP(5) för en beskrivning av utdatasubstituering.
.TP 
\fB\-T\fP\fIsubstvars\-fil\fP
\fBRekommenderas ej\fP. Läser substitueringsvariabler från \fIsubstvarfil\fP;
standardvärde är att inte läsa någon fil.
.TP 
\fB\-D\fP\fIfält\fP\fB=\fP\fIvärde\fP
Ersätt eller lägg till ett fält i den genererade control\-filen.
.TP 
\fB\-U\fP\fIfält\fP
Ta bort ett fält ur den genererade control\-filen.
.TP 
\fB\-Z\fP\fIkomprimeringstyp\fP
Anger vilken komprimering som skall användas för de skapade filerna
(tar\-bollar och diffar). Observera att flaggan inte gör att befintliga
tar\-bollar packas om, utan enbart påverkar nya filer. Värden som stöds är:
\fIgzip\fP, \fIbzip2\fP samt \fIlzma\fP. \fIgzip\fP är förvalet.
.TP 
\fB\-z\fP\fIkomprimeringsnivå\fP
Komprimeringsnivå att använda. Som med \fB\-Z\fP påverkas bara filer som
nyskapas. Värden som stöds är: \fI1\fP till \fI9\fP, \fIbest\fP (bäst) och \fIfast\fP
(snabb). \fI9\fP är förval.
.TP 
\fB\-i\fP[\fIreguljärt\-uttryck\fP]
Du kan ange ett reguljärt uttryck i perlformat för att matcha filer som du
vill skall filtreras ut ur listan över filer för diffen. (Listan skapas av
ett find\-kommando.) (Om källkodspaketet byggs som ett version 3\-paket med
ett VCS används detta istället för att ignorera filer som inte har checkats
in). \fB\-i\fP ensamt aktiverar funktionen, med ett standardvärde som filtrerar
ut styrfiler och kataloger från de flesta vanliga versionshanteringssystem,
säkerhetskopior, växlingsfiler och Libtool\-byggutdatakataloger. Endast ett
reguljärt kan vara aktivt, om du anger flera \fB\-i\fP\-flaggor är det den sista
på kommandoraden som gäller.

Flaggan är mycket användbar för att utesluta extrafiler som kommer med i
diffen, t.ex om du underhåller din källkod i ett versionshanteringssystem
och vill använda en utcheckning för att bygga ett källkodspaket utan att ta
med de ytterligare filer och det normalt innehåller (t.ex CVS/, .cvsignore,
\&.svn/). Det förvalda reguljära uttrycket täcker redan in många av dessa, men
om du ändrar det, kom ihåg att det som standard kan träffa alla delar av
filnamnet. Så, om du träffa bara början av ett filnamn eller hela filnamn
måste du själv lägga till de förankringar som är nödvändiga (t.ex '(^|/)',
\&'($|/)').
.TP 
\fB\-I\fP[\fIfilnamnsmönster\fP]
Om flaggan anges kommer filnamnet att sändas vidare till \fBtar\fP(1):s
\-\-exclude\-flagga när det anropas för att skapa en .orig.tar.gz eller
\&.tar.gz\-fil. Till exempel kommer \-ICVS att hoppa över CVS\-kataloger när
tar.gz\-filen skapas. Flaggan kan upprepas flera gånger för att lista flera
filnamn som skall uteslutas.

\fB\-i\fP ensamt aktiverar funktionen, med ett standardvärde som filtrerar ut
styrfiler och kataloger från de flesta vanliga versionshanteringssystem,
säkerhetskopior, växlingsfiler och Libtool\-byggutdatakataloger.
.PP
\fBObservera:\fP Även om de används till liknande ändamål, så har \fB\-i\fP och
\fB\-I\fP väldigt olika syntax och semantik. \fB\-i\fP kan endast anges en gång och
tar ett perl\-kompatibelt reguljärt uttryck, vilket matchas mot den kompletta
relativa sökvägen för varje fil. \fB\-I\fP kan anges flera gånger och tar ett
filnamnssökmänster med skaljokertecken. Mönstret matchas mot den kompletta
relativa sökvägen, men även individuellt mot varje komponent i sökvägen. Den
exakta semantiken för tar:s \-\-exclude\-flagga är något komplicerad, se
http://www.gnu.org/software/tar/manual/tar.html#wildcards för fullständig
dokumentation.

Förvalt reguljärt uttryck och sökmönster för de bägge flaggorna kan ses i
utdata för \fB\-\-help\fP\-kommandot.
.SH "ALLMÄNNA UPPACKNINGSFLAGGOR"
.TP 
\fB\-\-no\-copy\fP
Kopiera inte original\-tarbollar i närheten av det uppackade källkodspaketet.
.TP 
\fB\-\-no\-check\fP
Kontrollera inte signaturer och kontrollsummor före uppackning.

.SH KÄLLKODSPAKETFORMAT
.SS "Format: 1.0"
Ett källkod i detta format består antingen av en \fB.orig.tar.gz\fP, förbunden
med en \fB.diff.gz\fP, eller en ensam \fB.tar.gz\fP (i så fall anses paketet vara
\fIeget\fP, "\fInative\fP").

\fBUppackning\fP

Att packa upp ett Debianeget paket innebär att packa upp den ensamma
tarbollen i målkatalogen. Att packa upp ett icke\-eget paket innebär att
först packa upp \fI.orig.tar.gz\fP\-filen och sedan genom att tillämpa patchen
som finns i \fB.diff.gz\fP\-filen. Tidsstämplarna för alla filer nollställs till
den tidpunkt då källkodspaketet extraherades (vilket undviker
tidsstämpelförskjutningar som kunde leda till problem när autogenererade
filer patchas). Diffen kan skapa nya filer (hela debian\-katalogen skapas på
det sättet), men kan inte ta bort filer (tomma filer kommer lämnas kvar).

\fBBygga\fP

Att bygga ett Debianeget paket innebär bara att skapa en ensam tarboll med
källkodskatalogen. Att bygga ett icke\-eget paket innefattar att extrahera
original\-tarbollen i en separat ".orig"\-katalog och skapa \fB.diff.gz\fP\-filen
på nytt genom att jämföra källkodspaketets \fIkatalog\fP med .orig\-katalogen.

.TP 
\fBByggflaggor (med \-b):\fP
.PP
Om ett andra argument som inte är en flagga anges skall det vara namnet på
originalkällkodskatalogen eller \-tarfilen eller den tomma strängen om
paketet är Debianspecifikt och därför inte har några
Debianiserings\-diffar. Om inget andra argument anges kommer \fBdpkg\-source\fP
att leta efter originalkällkodstarfilen
\fIpaket\fP\fB_\fP\fIuppströmsversion\fP\fB.orig.tar.gz\fP eller
originalkällkodskatalogen \fIpaket\fP\fB.orig\fP beroende på \fB\-sX\fP\-flaggorna.

\fB\-sa\fP, \fB\-sp\fP, \fB\-sk\fP, \fB\-su\fP och \fB\-sr\fP skriver inte över befintliga
tar\-filer och kataloger. Om det önskas bör  \fB\-sA\fP, \fB\-sP\fP, \fB\-sK\fP, \fB\-sU\fP
och \fB\-sR\fP anges i stället.
.TP 
\fB\-sk\fP
Anger att den ursprungliga källkoden är en tar\-fil, som standard
\fIpaket\fP\fB_\fP\fIuppströmsversion\fP\fB.orig.tar.\fP\fIfiländelse\fP. Den kommer låta
originalkällkodsfilen ligga kvar som en tarfil, eller kopiera den till den
aktuella katalogen om den inte redan är där. Tarbollen kommer att packas upp
i \fIkatalog\fP\fB.orig\fP för att generera diffen.
.TP 
\fB\-sp\fP
Som \fB\-sk\fP, men tar bort katalogen igen efteråt.
.TP 
\fB\-su\fP
Anger att originalkällkoden är en katalog, som standard
\fIpaket\fP\fB\-\fP\fIuppströmsversion\fP\fB.orig\fP och att \fBdpkg\-source\fP skall skapa
ett nytt originalkällkodsarkiv från den.
.TP 
\fB\-sr\fP
Som \fB\-su\fP, men tar bort katalogen när den har använts.
.TP 
\fB\-ss\fP
Anger att originalkällkoden finns både som en katalog och en
tar\-fil. Katalogen kommer att användas av dpkg\-source för att skapa diffen,
men tarfilen för att skapa \fB.dsc\fP\-filen. Flaggan måste användas med
tillförsikt \- om katalogen och tarfilen inte stämmer överens kommer ett
trasigt källkodsarkiv att skapas.
.TP 
\fB\-sn\fP
Anger att dpkg\-source inte skall leta efter något källkodsarkiv och att
ingen diff skall skapas. Det andra argumentet, om det anges, måste vara den
tomma strängen. Flaggan används för Debianspecifika paket som inte har en
separat uppströmskällkod och därför inte har någon debianiseringsdiff.
.TP 
\fB\-sa\fP eller \fB\-sA\fP
Anger att originalkällkoden finns som en katalog eller en tarfil \- det andra
argumentet, om det anges, kan vara det ena eller det andra, eller den tomma
strängen (motsvarar att använda \fB\-sn\fP). Om en tarfil hittas kommer
programmet att packa upp den för att skapa en diff och ta bort den efteråt
(motsvarar \fB\-sp\fP). Om en katalog hittas kommer den att packas för att skapa
originalkällkoden och ta bort den efteråt (motsvarar \fB\-sn\fP). Om båda hittas
kommer \fBdpkg\-source\fP att ignorera katalogen, och skriva över den om \fB\-sA\fP
angavs (detta motsvarar \fB\-sP\fP) eller ge ett felmeddelande om \fB\-sa\fP
angavs. \fB\-sA\fP är standard.
.TP 
\fBExtraheringsflaggor (med \-x):\fP
.PP
Oavsett kommer ett befintligt källkodsträd att tas bort.
.TP 
\fB\-sp\fP
Används när originalkällkoden som extraheras (om sådan finns) skall lämnas
kvar som en tarfil. Om den inte redan finns i den aktuella katalogen, eller
om en befintlig men annan fil finns där, kommer den att kopieras
dit. (\fBDetta är standard.\fP)
.TP 
\fB\-su\fP
Packar upp originalkällkodsträdet.
.TP 
\fB\-sn\fP
Försäkrar att originalkällkoden varken kopieras till en aktuella katalogen
eller packas upp. Eventuella originalkällkodsträd som finns i den aktuella
katalogen tas fortfarande bort.
.PP
Alla \fB\-s\fP\fIX\fP\-flaggor är ömsesidigt uteslutande. Om du anger mer än en
kommer endast den sista att användas.
.
.SS "Format: 2.0"
Även känt som wig&pen. Detta format rekommenderas inte för allmän
användning, formatet "3.0 (quilt)" ersätter det. Wig&pen var den första
specifikationen av en ny generation av källkodspaketformat.

Beteendet för detta format är detsamma som för "3.0 (quilt)"\-formatet,
förutom att det inte använder en explicit förteckning patchar. Alla filer i
\fBdebian/patches/\fP som motsvarar det Perl\-reguljära uttrycket \fB[\ew\-]+\fP
måste vara giltiga patchar: de appliceras när paketet packas upp.

När du bygger ett nytt källkodspaket kommer eventuella ändringar på
uppströmskällkoden att lagras i en patch som kallas \fBzz_debian\-diff\-auto\fP.
.
.SS "Format: 3.0 (eget)"
Detta format är en utökning av det egna paketformatet som anges av
1.0\-formatet. Det stöder alla komprimeringsmetoder och kommer att som
standard ignorera alla VCS\-specifika filer och kataloger, samt många
temporärfiler (se standardvärdet som är knutet till flaggan \fB\-i\fP i texten
för \fB\-\-help\fP).
.
.SS "Format: 3.0 (quilt)"
A source package in this format contains at least an original tarball
(\fB.orig.tar.\fP\fIext\fP where \fIext\fP can be \fBgz\fP, \fBbz2\fP and \fBlzma\fP) and a
debian tarball (\fB.debian.tar.\fP\fIext\fP). It can also contain additional
original tarballs (\fB.orig\-\fP\fIcomponent\fP\fB.tar.\fP\fIext\fP).  \fIcomponent\fP can
only contain alphanumeric characters and dashes ("\-").
.PP
\fBUppackning\fP
.PP
Huvud\-originaltarbollen packas upp först, därefter packas alla ytterligare
originaltarbollar upp i underkataloger med namn efter \fIkomponent\fP\-delen i
sitt filnamn (eventuella redan befintliga kataloger
ersätts). Debian\-tarbollen packas sedan upp ovanpå källkodskatalogen efter
att en redan befintlig \fBdebian\fP\-katalog har tagits bort först. Observera
att debian\-tarbollen måste bestå av en \fBdebian\fP\-underkatalog, men att den
även kan innehålla binärfiler utanför den katalogen (se flaggan
\fB\-\-include\-binaries\fP).
.PP
Alla patchar listade i \fBdebian/patches/debian.series\fP eller
\fBdebian/patches/series\fP tillämpas sedan. Om den förstnämnda filen används
och den sistnämnda inte existerar (eller är en symbolisk länk), kommer den
senare att ersättas av en symbolisk länk till den första. Tanken är att göra
det enklare att använda quilt till att hantera patchuppsättningen. Observera
att, även om \fBdpkg\-source\fP korrekt tolkar series\-filer som använder
explicita flaggor till patch\-programmet (lagrade på kommandoraden efter
patch\-filnamnet och ett eller flera blanksteg), så ignoreras dessa flaggor
och det förväntar sig att patchar kan tillämpas med flaggan \fB\-p1\fP till
\fBpatch\fP. Det kommer därför visa en varning sådana flaggor upptäcks, och
bygget kommer troligen att misslyckas.
.PP
Patchar kan även ta bort filer, på ungfär samma sätt som quilt normalt
fungerar.
.PP
The file \fB.pc/applied\-patches\fP is created if some patches have been applied
during the extraction.
.PP
\fBBygga\fP
.PP
Alla original\-tarbollar som finns i den aktuella katalogen packas upp i en
temporär katalog med samma logik som i uppackningen, debian\-katalogen
kopieras över i den temporära katalogen och alla patchar, förutom
\fBdebian\-changes\-\fP\fIversion\fP tillämpas. Temporärkatalogen jämförs därefter
mot källkodskatalogen och diffen (om den inte är tom) lagras i
\fBdebian/patches/debian\-changes\-\fP\fIversion\fP. Eventuella ändringar på
binärfiler kan inte representeras i diffen och kommer därmed att leda till
ett felmeddelande, såvida inte paketansvariga medvetet väljer att inkludera
den modifierade binärfilen i debian\-tarbollen (genom att lista den i
\fBdebian/source/include\-binaries\fP). Byggningen kommer även att misslyckas om
binärfiler upptäcks i debian\-underkatalogen, såvida de inte har vitlistats i
\fBdebian/source/include\-binaries\fP.

Den uppdaterade debiankatalogen, och listan över modifierade binärer,
används sedan för att omskapa debian\-tarbollen.

Den automatiskt genererade diff\-filen innehåller inte ändringar för
VCS\-specifika filer eller för många temporära filer (se standardvärdet som
är knutet till flaggan \fB\-i\fP i texten för \fB\-\-help\fP). Detta gäller speciellt
katalogen \fB.pc\fP som används av quilt, katalogen kommer att ignoreras när
den automatiska patchen skapas.

Note: \fBdpkg\-source\fP expects the source tree to have all patches applied
when you generate the source package.  This is not the case when the source
tree has been obtained by unpacking a source package using the Format: 1.0
for instance. To mitigate the problem, \fBdpkg\-source\fP will apply the patches
by itself if it believes that they have not yet been applied. To detect this
situation, it uses the following heuristic: it finds the list of supposedly
unapplied patches (they are listed in the \fBseries\fP file but not in
\&\fB.pc/applied\-patches\fP), and if the first patch in that set can be applied
without errors, it will apply them all.  The option \fB\-\-no\-preparation\fP can
be used to disable this behaviour.
.PP
\fBByggflaggor\fP
.TP 
\fB\-\-allow\-version\-of\-quilt\-db=\fP\fIversion\fP
Allow \fBdpkg\-source\fP to build the source package if the version of the quilt
metadata is the one specified, even if \fBdpkg\-source\fP doesn't know about
it. Effectively this says that the given version of the quilt metadata is
compatible with the version 2 that \fBdpkg\-source\fP currently supports. The
version of the quilt metadata is stored in \fB.pc/.version\fP.
.TP 
\fB\-\-include\-removal\fP
Ignorera inte borttagna filer och ta med dem i den automatiskt genererade
patchen.
.TP 
\fB\-\-include\-timestamp\fP
Ta med tidsstämpel i den automatiskt genererade patchen.
.TP 
\fB\-\-include\-binaries\fP
Lägg till alla modifierade binärer i debian\-tarbollen. Lägg även till dem i
\fBdebian/source/include\-binaries\fP: de kommer att läggas till som standard i
följande byggen och du behöver inte längre ange den här flaggan.
.TP 
\fB\-\-no\-preparation\fP
Försök inte att förbereda byggträdet genom att tillämpa patchar som inte
verkar ha tillämpas för närvarande.
.PP
\fBExtraheringsflaggor\fP
.TP 
\fB\-\-skip\-patches\fP
Applicera inte patchar i slutet av uppackningen.
.
.SS "Format: 3.0 (skräddarsytt)"
Detta formatet är speciellt. Det anger inte ett riktigt källkodspaketformat,
utan kan användas för att skapa källkodspaket med godtyckliga filer.
.PP
\fBByggflaggor\fP
.PP
Alla argument som inte är flaggor tas som filer som skall integreras i det
skapade källkodspaketet. De måste finnas, och helst i aktuell
katalog. Åtminstone en fil måste anges.
.TP 
\fB\-\-target\-format=\fP\fIvärde\fP
\fBKrävs\fP. Anger det riktiga formatet på det genererade källkodspaketet. Den
skapade .dsc\-filen kommer innehålla detta värde i sitt \fIFormat\fP\-fält och
inte "3.0 (custom)".
.
.SS "Format: 3.0 (git) och 3.0 (bzr)"
Dessa format är experimentella. De genererar en ensam tarboll som innehåller
motsvarande VCS\-arkiv.
.PP
\fBUppackning\fP
.PP
Tarbollen packas upp och VCS\-verktyget används sedan för att hämta ut den
aktuella grenen.
.PP
\fBBygga\fP
.PP
Innan uppackningen fortsätter kommer en del tester att utföras för att se
till att vi inte har några ej ignorerade ej incheckade ändringar.
.PP
De VCS\-specifika delarna av källkodskatalogen kommer därefter att kopieras
över till en temporär katalog. Innan den temporära katalogen packas i en
tarboll utförs viss städning för att spara plats.
.SH PROGRAMFEL
Tidpunkten på fältöverstyrning inträffar jämfört med inställning av vissa
standardutdatafält är ganska förvirrad.
.SH "SE ÄVEN"
\fBdpkg\-deb\fP(1), \fBdpkg\fP(1), \fBdselect\fP(1).
.
.SH FÖRFATTARE
Upphovsrättsskyddad © 1995\-1996 Ian Jackson
.br
Upphovsrättsskyddat © 2000 Wichert Akkerman
.br
Upphovsrättsskyddat © 2008 Raphaël Hertzog
.sp
Detta är fri programvara; se GNU General Public License version 2 eller
senare för kopieringsvillkor. Det finns INGEN GARANTI.
.SH "ÖVERSÄTTNING"
Peter Krefting och Daniel Nylander.
